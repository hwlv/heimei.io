---
title: "js闭包"
date: 2022-05-21T23:39:07+08:00
draft: true
categories: ["面试"]
tags: ["闭包", "词法环境", "js" ]
---


### 说说闭包
一个函数和对其周围状态（lexical environment，词法环境）的引用捆绑在一起（或者说函数被引用包围），这样的组合就是闭包（closure）。也就是说，闭包让你可以在一个内层函数中访问到其外层函数的作用域。在 JavaScript 中，每当创建一个函数，闭包就会在函数创建的同时被创建出来。
和垃圾回收机制有关系。

```javascript
function init() {
  var name = "Mozilla"; // name 是一个被 init 创建的局部变量
  function displayName() { // displayName() 是内部函数，一个闭包
      alert(name); // 使用了父函数中声明的变量
  }
  displayName();
}
init();
```

### 作用域

1. 全局作用域
2. 函数作用域
3. 块级作用域
4. 词法作用域
5. 动态作用域 动态作用域跟 this 引用机制相关

- 全局作用域
生命周期将存在于整个程序之内。能被程序中任何函数或者方法访问。

- 函数作用域
函数作用域内，对外是封闭的，只能内层访问外层。
> 如何访问函数内的变量
1. 通过 return 访问函数内部变量
2. 通过 闭包 访问函数内部变量
3. 立即执行函数

- 块级作用域
创建块级作用域的条件是必须有一个 { } 包裹。
- 词法作用域(静态作用域)
词法作用域（Lexical Scope） 是定义表达式并能被访问的区间。即js引擎总是从最近的一个域向外层域查找。
- 动态作用域
动态作用域，作用域是基于调用栈的，而不是代码中的作用域嵌套；
作用域嵌套，有词法作用域一样的特性，查找变量时，总是寻找最近的作用域；

